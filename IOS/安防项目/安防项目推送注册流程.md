****
```flow
st=>start: 获取设备列表
ed=>end: 用户登出并反订阅ALL
queryList=>operation: 查询已订阅设备,与准备订阅列表进行比较
readytosub=>operation: 准备订阅与反订阅不相同的设备
init=>operation: 初始化(加同步锁，初始化一次)
waittonoti=>operation: 等待通知

isinited=>condition: 判断是否初始化
subproc=>condition: 订阅或反订阅流程(是否成功)


st->queryList->readytosub->isinited
isinited(yes)->subproc
isinited(no)->init->subproc
subproc(yes)->waittonoti->ed
subproc(no)->isinited
```
****


